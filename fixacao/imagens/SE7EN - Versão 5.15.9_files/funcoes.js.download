// JavaScript Document
function abrePopup(pagina, titulo, tamx, tamy) {
	var telaX = screen.availWidth;
	var telaY = screen.availHeight;
	var x = (telaX / 2) - (tamx / 2);
	var y = (telaY / 2) - (tamy / 2);
	window.open(pagina, titulo, 'toolbar=no,location=no,status=no,menubar=no,scrollbars=no,resizable=no,width=' + tamx + ',height=' + tamy + ',top=' + y + ',left=' + x);
}

function listaCursos(t) {
	$('#listaCursos').attr('class', 'listaCursos' + t);
	$('#listaCurso').attr('class', 'listaCurso' + t);
}

function abreAvalia(pagina, titulo, tamx, tamy) {
	var telaX = screen.availWidth;
	var telaY = screen.availHeight;
	var x = (telaX / 2) - (tamx / 2);
	var y = (telaY / 2) - (tamy / 2);
	window.open(pagina, titulo, 'toolbar=no,location=no,status=no,menubar=yes,scrollbars=yes,resizable=no,width=' + tamx + ',height=' + tamy + ',top=' + y + ',left=' + x);
}

function CloseWindow() {
	window.close();
}



function fechar() {
	var is_chrome = window.chrome;

	if (typeof is_chrome === "undefined") {
		var win = window.open(location, "_self");
		win.close();
	} else if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) {
		window.open('', '_self', '');
		window.close();
	} else {

		window.open("", "_self").close();


	}
}

function quitBox(cmd) {
	var win = window.open("about:blank", "_self");
	win.close();
}

function adapta() {
	// pega height da tela
	var h = document.documentElement.clientHeight;
	//var w = document.documentElement.clientWidth;
	// calcula o espaco que sobra
	h = h - 80;
	$('#geral').css('height', h);
	//$('#geral').css('width',w);
}

function Dados(valor) {
	//verifica se o browser tem suporte a ajax
	try {
		ajax = new ActiveXObject("Microsoft.XMLHTTP");
	} catch (e) {
		try {
			ajax = new ActiveXObject("Msxml2.XMLHTTP");
		} catch (ex) {
			try {
				ajax = new XMLHttpRequest();
			} catch (exc) {
				alert("Esse browser não tem recursos para uso do Ajax");
				ajax = null;
			}
		}
	}
	//se tiver suporte ajax
	if (ajax) {
		//deixa apenas o elemento 1 no option, os outros são excluídos
		try {
			document.forms[0].listCidades.options.length = 1;
		} catch (error) {
			document.forms[1].listCidades.options.length = 1;
		}


		idOpcao = document.getElementById("opcoes");

		ajax.open("POST", "_inc/cidades.php", true);
		ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

		ajax.onreadystatechange = function () {
			//enquanto estiver processando...emite a msg de carregando
			if (ajax.readyState == 1) {
				idOpcao.innerHTML = "Carregando...!";
			}
			//ap�s ser processado - chama função processXML que vai varrer os dados
			if (ajax.readyState == 4) {
				if (ajax.responseXML) {
					processXML(ajax.responseXML);
				} else {
					//caso não seja um arquivo XML emite a mensagem abaixo
					idOpcao.innerHTML = "--Primeiro selecione o estado--";
				}
			}
		}
		//passa o código do estado escolhido
		var params = "estado=" + valor;
		ajax.send(params);
	}
}

function Dados_Estados(valor) {
	$("select[name=listEstados]").html('<option value="0">Carregando...</option>');
	$.post("_inc/estados.php", {
		pais: valor
	},
		function (dados) {
			$("select[name=listEstados]").html(dados);
			//$("#opcoes").html("--Primeiro selecione o estado--");
		})
}

function processXML(obj) {
	//pega a tag cidade
	var dataArray = obj.getElementsByTagName("cidade");

	//total de elementos contidos na tag cidade
	if (dataArray.length > 0) {
		//percorre o arquivo XML paara extrair os dados
		for (var i = 0; i < dataArray.length; i++) {
			var item = dataArray[i];
			console.log(item)
			//contúudo dos campos no arquivo XML
			var codigo = item.getElementsByTagName("codigo")[0].firstChild.nodeValue;
			var descricao = item.getElementsByTagName("descricao")[0].firstChild.nodeValue;

			//idOpcao.innerHTML = "--Selecione uma das op&ccedil;&otilde;es abaixo--";

			//cria um novo option dinamicamente  
			var novo = document.createElement("option");
			//atribui um ID a esse elemento
			novo.setAttribute("id", "opcoes");
			//atribui um valor
			novo.value = codigo;
			//atribui um texto
			novo.text = descricao;
			//finalmente adiciona o novo elemento
			try {
				document.forms[0].listCidades.options.add(novo);
			} catch (error) {
				document.forms[1].listCidades.options.add(novo);
			}

		}
	} else {
		//caso o XML volte vazio, printa a mensagem abaixo
		idOpcao.innerHTML = "--Primeiro selecione o estado--";
	}
}

function DadosDias(valor) {
	//verifica se o browser tem suporte a ajax
	try {
		ajax = new ActiveXObject("Microsoft.XMLHTTP");
	} catch (e) {
		try {
			ajax = new ActiveXObject("Msxml2.XMLHTTP");
		} catch (ex) {
			try {
				ajax = new XMLHttpRequest();
			} catch (exc) {
				alert("Esse browser não tem recursos para uso do Ajax");
				ajax = null;
			}
		}
	}
	//se tiver suporte ajax
	if (ajax) {
		//deixa apenas o elemento 1 no option, os outros são excluídos
		document.forms[0].listDias.options.length = 1;

		idOpcao = document.getElementById("opcoesDias");

		ajax.open("POST", "_inc/laboratorioDias.php", true);
		ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

		ajax.onreadystatechange = function () {
			//enquanto estiver processando...emite a msg de carregando
			if (ajax.readyState == 1) {
				idOpcao.innerHTML = "Carregando...!";
			}
			//após ser processado - chama função processDiaXML que vai varrer os dados
			if (ajax.readyState == 4) {
				if (ajax.responseXML) {
					processDiaXML(ajax.responseXML);
				} else {
					//caso não seja um arquivo XML emite a mensagem abaixo
					idOpcao.innerHTML = "--Primeiro selecione o laboratório--";
					//deixa apenas o elemento 1 no option, os outros são excluídos
					document.forms[0].listHorarios.options.length = 1;
					document.getElementById("opcoesHorarios").innerHTML = "--Primeiro selecione o dia--";
				}
			}
		}
		//passa o código do laboratorio escolhido
		var params = "laboratorio=" + valor;
		ajax.send(params);
	}
}

function processDiaXML(obj) {
	//pega a tag cidade
	var dataArray = obj.getElementsByTagName("dia");

	//total de elementos contidos na tag dia
	if (dataArray.length > 0) {
		//percorre o arquivo XML paara extrair os dados
		for (var i = 0; i < dataArray.length; i++) {
			var item = dataArray[i];
			//contúudo dos campos no arquivo XML
			var codigo = item.getElementsByTagName("codigo")[0].firstChild.nodeValue;
			var descricao = item.getElementsByTagName("descricao")[0].firstChild.nodeValue;

			idOpcao.innerHTML = "--Selecione uma das op&ccedil;&otilde;es abaixo--";
			document.forms[0].listHorarios.options.length = 1;
			document.getElementById("opcoesHorarios").innerHTML = "--Primeiro selecione o dia--";

			//cria um novo option dinamicamente  
			var novo = document.createElement("option");
			//atribui um ID a esse elemento
			novo.setAttribute("id", "opcoesDias");
			//atribui um valor
			novo.value = codigo;
			//atribui um texto
			novo.text = descricao;
			//finalmente adiciona o novo elemento
			document.forms[0].listDias.options.add(novo);
		}
	} else {
		//caso o XML volte vazio, printa a mensagem abaixo
		idOpcao.innerHTML = "--Primeiro selecione o laboratório--";
		//deixa apenas o elemento 1 no option, os outros são excluídos
		document.forms[0].listHorarios.options.length = 1;
		document.getElementById("opcoesHorarios").innerHTML = "--Primeiro selecione o dia--";
	}
}

function DadosDiaHorarios(valor) {
	//verifica se o browser tem suporte a ajax
	try {
		ajax = new ActiveXObject("Microsoft.XMLHTTP");
	} catch (e) {
		try {
			ajax = new ActiveXObject("Msxml2.XMLHTTP");
		} catch (ex) {
			try {
				ajax = new XMLHttpRequest();
			} catch (exc) {
				alert("Esse browser não tem recursos para uso do Ajax");
				ajax = null;
			}
		}
	}
	//se tiver suporte ajax
	if (ajax) {
		//deixa apenas o elemento 1 no option, os outros são excluídos
		document.forms[0].listHorarios.options.length = 1;

		idOpcao = document.getElementById("opcoesHorarios");

		ajax.open("POST", "_inc/laboratorioDiasHorarios.php", true);
		ajax.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

		ajax.onreadystatechange = function () {
			//enquanto estiver processando...emite a msg de carregando
			if (ajax.readyState == 1) {
				idOpcao.innerHTML = "Carregando...!";
			}
			//ap�s ser processado - chama função processHorarioXML que vai varrer os dados
			if (ajax.readyState == 4) {
				if (ajax.responseXML) {
					processHorarioXML(ajax.responseXML);
				} else {
					//caso não seja um arquivo XML emite a mensagem abaixo
					idOpcao.innerHTML = "--Primeiro selecione o dia--";
				}
			}
		}
		//passa o código do dia escolhido
		var params = "dia=" + valor;
		ajax.send(params);
	}
}

function processHorarioXML(obj) {
	//pega a tag cidade
	var dataArray = obj.getElementsByTagName("horario");

	//total de elementos contidos na tag horario
	if (dataArray.length > 0) {
		//percorre o arquivo XML paara extrair os dados
		for (var i = 0; i < dataArray.length; i++) {
			var item = dataArray[i];
			//contúudo dos campos no arquivo XML
			var codigo = item.getElementsByTagName("codigo")[0].firstChild.nodeValue;
			var descricao = item.getElementsByTagName("descricao")[0].firstChild.nodeValue;

			idOpcao.innerHTML = "--Selecione uma das op&ccedil;&otilde;es abaixo--";

			//cria um novo option dinamicamente  
			var novo = document.createElement("option");
			//atribui um ID a esse elemento
			novo.setAttribute("id", "opcoesHorarios");
			//atribui um valor
			novo.value = codigo;
			//atribui um texto
			novo.text = descricao;
			//finalmente adiciona o novo elemento
			document.forms[0].listHorarios.options.add(novo);
		}
	} else {
		//caso o XML volte vazio, printa a mensagem abaixo
		idOpcao.innerHTML = "--Primeiro selecione o dia --";
	}
}

function texto(url, w, h) {
	tb_show('', url + '#KeepThis=true&TB_iframe=true&height=' + h + '&width=' + w, null);
	/*
	var objLink = document.createElement('a');
	objLink.setAttribute('href',url);
	objLink.setAttribute('rel','lyteframe');
	objLink.setAttribute('rev','width:'+w+';height:'+h+';')
	myLytebox.start(objLink, false, true);
	*/
}

function mostraCidades(id) {
	document.getElementById('lista_de_cidades').innerHTML = '<select name="listCidades" class="form-control"><option id="opcoes" value="0">--Primeiro selecione o estado--</option></select>';
	Dados(id);
}


function checaCadAlunos(fn) {

	var d = document.fn;

	//validar nome
	if (d.nome.value == "") {
		alert("O campo " + d.nome.name + " deve ser preenchido!");
		d.nome.focus();
		return false;
	}

	//validar data de nascimento
	erro = 0;
	hoje = new Date();
	anoAtual = hoje.getFullYear();
	barras = d.data_nascimento.value.split("/");
	if (barras.length == 3) {
		dia = barras[0];
		mes = barras[1];
		ano = barras[2];
		resultado = (!isNaN(dia) && (dia > 0) && (dia < 32)) && (!isNaN(mes) && (mes > 0) && (mes < 13)) && (!isNaN(ano) && (ano.length == 4) && (ano <= anoAtual && ano >= 1900));
		if (!resultado) {
			alert("Formato de data invalido!");
			d.data_nascimento.focus();
			return false;
		}
	} else {
		alert("Formato de data invalido!");
		d.data_nascimento.focus();
		return false;
	}

	//validar email
	if (d.email.value == "") {
		alert("O campo " + d.email.name + " deve ser preenchido!");
		d.email.focus();
		return false;
	}
	/*
	//validar email(verificao de endereco eletronico)
	parte1 = d.email.value.indexOf("@");
	parte2 = d.email.value.indexOf(".");
	parte3 = d.email.value.length;
	if (!(parte1 >= 3 && parte2 >= 6 && parte3 >= 9)) {
		alert("O campo " + d.email.name + " deve ser conter um endereco eletronico!");
		d.email.focus();
		return false;
	}
	*/

	//validar telefone
	if (d.telefone.value == "") {
		alert("O campo " + d.telefone.name + " deve ser preenchido!");
		d.telefone.focus();
		return false;
	}

	//validar estado
	if (d.listEstados.value == "") {
		alert("O campo Estado deve ser preenchido!");
		d.listEstados.focus();
		return false;
	}

	//validar cidade
	if (d.listCidades.value == "") {
		alert("O campo Cidade deve ser preenchido!");
		d.listCidades.focus();
		return false;
	}

	//validar endereco
	if (d.endereco.value == "") {
		alert("O campo Endere�o deve ser preenchido!");
		d.endereco.focus();
		return false;
	}

	//validar login
	if (d.login_.value == "") {
		alert("O campo Login deve ser preenchido!");
		d.login_.focus();
		return false;
	}

	//validar senha
	if (d.senha.value == "") {
		alert("O campo Senha deve ser preenchido!");
		d.senha.focus();
		return false;
	}

	return true;

}

function marcaTudo(id) {
	var u = $('#modulo_' + id).get();
	if (u[0].checked) {
		v = true;
	} else {
		v = false;
	}
	chs = $(".modulo_" + id).get();
	c = chs.length;
	for (i = 0; i < chs.length; i++) {
		//alert(chs[i].checked);
		chs[i].checked = v;
	}
}


function mostraPub() {
	tb_show('', '#TB_inline?height=700&width=1020&inlineId=modulos_&modal=true', null);
}

function passaPub() {
	if (l < (lista.length - 1)) {
		l++;
		a++;
		/*var flashvars = {};
		var params = {};
		params.bgcolor = "#FFFFFF";
		params.quality = "best";
		params.scale = "noscale";
		var attributes = {};
		swfobject.embedSWF("_publicidade/"+arquivos[a]+"", "flash_", "1000", "680", "8.0.0", "_inc/swfobject/expressInstall.swf", flashvars, params, attributes);
		*/
		var imagem = '_publicidade/' + arquivos[a];
		var modal = $("#publicidade_metodo");
		modal.find('img').attr('src', imagem);
		modal.modal('show');
	} else {
		tb_remove();
		l = 0;
		a = 0;
	}
}

function controleFrequencia(id, pagNivel, tipo) {
	var de = document.getElementById('periodo_de_' + id).value;
	var ate = document.getElementById('periodo_ate_' + id).value;
	document.location = '?pag=' + pagNivel + '&secao=controle_frequencia&tipo=' + tipo + '&acao=periodo&aluno=' + id + '&de=' + de + '&ate=' + ate;
}

function controleFrequenciaGeral(pagNivel, tipo) {
	var de = document.getElementById('periodo_de').value;
	var ate = document.getElementById('periodo_ate').value;
	var g = document.getElementById('agrupardados').checked;
	if (g) {
		g = '&g=1';
	} else {
		g = '';
	}
	document.location = '?pag=' + pagNivel + '&secao=controle_frequencia&tipo=' + tipo + '&acao=periodo&de=' + de + '&ate=' + ate + g;
}

var filtraAlunosListaa = true;
var filtraAlunosListaf = true;

function filtraAlunosLista(p, lopp) {

	console.log(filtraAlunosListaa, p, lopp)

	var n = document.getElementById('filtroNome').value;
	var d = document.getElementById('filtroDn').value;
	var e = document.getElementById('filtroEmail').value;
	var l = document.getElementById('filtroLogin').value;
	var c = document.getElementById('ddlista').value;
	var s = document.getElementById('filtroStatus').value;

	if (filtraAlunosListaa) {

		// $('#conteudoTabela').html('<tr><td colspan="10" style="text-align:center;" height="50" valign="middle"><img src="_img/5.gif" alt="Carregando..." /></td></tr>');

		$.ajax({
			type: "POST",
			async: true,
			dataType: "json",
			url: "_pags/admin/alunos/carregaAlunos.php",
			data: {
				n: n,
				d: d,
				e: e,
				p: p,
				l: l,
				c: c,
				s: s
			},
			beforeSend: function (xhr) {
				filtraAlunosListaa = false;
				let html = $('#conteudoTabela').html()
				if (!filtraAlunosListaf) {
					$('#conteudoTabela').find('tr td').html('<span class="skeleton-box" style="width:85%; height: 15px;"></span>')
				}
			},
			success: function (data) {
				filtraAlunosListaf = false;
				$('#conteudoTabela').html(data['lista']);
				$('#status0').text(data['0']);
				$('#status1').text(data['1']);
				$('#status2').text(data['2']);
				$('#status3').text(data['3']);
				$('#status4').text(data['4']);
				$('#status5').text(data['5']);
				filtraAlunosListaa = true;
			},
			error: function (result) {
				console.error('AjaxError', result)
				if (!filtraAlunosListaf) {
					$('#conteudoTabela').html('<tr><td colspan="10" style="text-align:center;" height="50" valign="middle">Houve um erro ao carregar a lista de alunos</td></tr>')
				}
				if (lopp != 11) {
					setTimeout(function () {
						filtraAlunosListaa = true;
						filtraAlunosLista(p, 11);
					}, 2000);
				} else {
					filtraAlunosListaa = true;
				}
			},
		})
	}

	/*$.post("_pags/admin/alunos/carregaAlunos.php?dados=true", {n: n,d: d,e: e,p: p,l: l,c:c,s:s}, function(data){
		if(data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});*/
}

function filtraAlunosListaMigracao(p) {

	var n = document.getElementById('filtroNome').value;
	var d = document.getElementById('filtroDn').value;
	var e = document.getElementById('filtroEmail').value;
	var l = document.getElementById('filtroLogin').value;
	var c = 'S'
	var s = document.getElementById('filtroStatus').value;
	var m = document.getElementById('filtroMigrados').value;

	$('#conteudoTabela').html('<tr><td colspan="10" style="text-align:center;" height="50" valign="middle"><img src="_img/5.gif" alt="Carregando..." /></td></tr>');

	$.ajax({
		type: "POST",
		dataType: "json",
		url: "_pags/admin/alunos/carregaAlunosMigracao.php",
		data: {
			n: n,
			d: d,
			e: e,
			p: p,
			l: l,
			c: c,
			s: s,
			m: m
		},
		success: function (data) {
			$('#conteudoTabela').html(data['lista']);
			$('#status0').text(data['0']);
			$('#status1').text(data['1']);
			$('#status2').text(data['2']);
			$('#status3').text(data['3']);
			$('#status4').text(data['4']);
			$('#status5').text(data['5']);
		}
	});

}

function filtraMatriculasAluno(p) {
	var c = document.getElementById('filtroContrato').value;
	var h = document.getElementById('filtroCh').value;
	var a = document.getElementById('filtroCa').value;
	var s = document.getElementById('filtroSituacao').value;
	var m = document.getElementById('filtroDm').value;
	var i = document.getElementById('filtroDi').value;
	var e = document.getElementById('filtroDe').value;
	var f = document.getElementById('filtroDf').value;
	$('#conteudoTabela').html('<tr><td colspan="11" style="text-align:center;" height="50" valign="middle">Carregando...<br /><img src="_img/preloader.gif" alt="Carregando..." /></td></tr>');
	$.post("_pags/admin/matriculas/carregaMatriculas.php", {
		c: c,
		h: h,
		a: a,
		s: s,
		m: m,
		i: i,
		f: f,
		e: e,
		p: p
	}, function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});
}

function filtraLaboratoriosLista(p) {
	var n = document.getElementById('filtroNome').value;
	$('#conteudoTabela').html('<tr><td colspan="10" style="text-align:center;" height="50" valign="middle">Carregando...<br /><img src="_img/preloader-ftp.gif" alt="Carregando..." /></td></tr>');
	$.post("_pags/admin/laboratorios/carregaLaboratorios.php", {
		n: n,
		p: p
	}, function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});
}

function filtraAniversariantes(p) {
	var n = document.getElementById('filtroNome').value;
	var d = document.getElementById('filtroDn').value;
	var e = document.getElementById('filtroEmail').value;
	var inicio = document.getElementById('filtroInicio').value;
	var fim = document.getElementById('filtroFim').value;

	$('#conteudoTabela').html('<tr><td colspan="10" style="text-align:center;" height="50" valign="middle">Carregando...<br /><img src="_img/preloader-ftp.gif" alt="Carregando..." /></td></tr>');
	$.post("_pags/admin/alunos/carregaAniversariantes.php", {
		n: n,
		d: d,
		e: e,
		p: p,
		inicio: inicio,
		fim: fim
	}, function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});
}

function filtraAtivosInativos(p) {
	var n = document.getElementById('filtroNome').value;
	var e = document.getElementById('filtroEmail').value;
	var ativo = document.getElementById('filtroAtivo').value;
	$('#conteudoTabela').html('<tr><td colspan="10" style="text-align:center;" height="50" valign="middle">Carregando...<br /><img src="_img/preloader-ftp.gif" alt="Carregando..." /></td></tr>');
	$.post("_pags/admin/alunos/carregaAtivosInativos.php", {
		n: n,
		e: e,
		p: p,
		ativo: ativo
	}, function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});
}

function filtraAlunosStatus(p) {
	var n = document.getElementById('filtroNome').value;
	var e = document.getElementById('filtroEmail').value;
	var status = document.getElementById('filtroStatus').value;
	$('#conteudoTabela').html('<tr><td colspan="10" style="text-align:center;" height="50" valign="middle">Carregando...<br /><img src="_img/preloader-ftp.gif" alt="Carregando..." /></td></tr>');
	$.post("_pags/admin/alunos/carregaAlunosStatus.php", {
		n: n,
		e: e,
		p: p,
		status: status
	}, function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});
}

function filtraAlunosExporta(p) {
	var n = document.getElementById('filtroNome').value;
	var d = document.getElementById('filtroDn').value;
	var e = document.getElementById('filtroEmail').value;
	$('#conteudoTabela').html('<tr><td colspan="6" style="text-align:center;" height="50" valign="middle">Carregando...<br /><img src="_img/preloader-ftp.gif" alt="Carregando..." /></td></tr>');
	$.post("_pags/admin/exporta/ajax_lista.php", {
		n: n,
		d: d,
		e: e,
		p: p
	}, function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});
}

function filtraAlunosControleFrequencia(p) {
	var n = document.getElementById('filtroNome').value;
	var l = document.getElementById('filtroLogin').value;
	var pagNivel = document.getElementById('pagNivel').value;
	var tipo = document.getElementById('tipo').value;
	$('#conteudoTabela').html('<tr><td colspan="3" style="text-align:center;" height="50" valign="middle">Carregando...<br /><img src="_img/preloader-ftp.gif" alt="Carregando..." /></td></tr>');
	$.post("_pags/admin/controle_frequencia_alunos.php", {
		n: n,
		l: l,
		p: p,
		pagNivel: pagNivel,
		tipo: tipo
	}, function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});
}

function filtraAlunosAvalia(p) {
	var n = document.getElementById('filtroNome').value;
	$('#conteudoTabela').html('<tr><td colspan="4" style="text-align:center;" height="50" valign="middle">Carregando...<br /><img src="_img/preloader-ftp.gif" alt="Carregando..." /></td></tr>');
	$.post("_pags/admin/avalia_alunos.php", {
		n: n,
		p: p
	}, function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});
}

function filtraAlunosAvaliaProf(p) {
	var n = document.getElementById('filtroNome').value;
	$('#conteudoTabela').html('<tr><td colspan="2" style="text-align:center;" height="50" valign="middle">Carregando...<br /><img src="_img/preloader-ftp.gif" alt="Carregando..." /></td></tr>');
	$.post("_pags/professor/avalia_alunos.php", {
		n: n,
		p: p
	}, function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});
}

function filtraAlunosChamadas(p) {
	var n = document.getElementById('filtroNome').value;
	$('#conteudoTabela').html('<tr><td colspan="2" style="text-align:center;" height="50" valign="middle">Carregando...<br /><img src="_img/preloader-ftp.gif" alt="Carregando..." /></td></tr>');
	$.post("_pags/admin/chamada_controle_alunos.php", {
		n: n,
		p: p
	}, function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});
}

function filtraAlunosCursos(p, pg) {
	var pg = pg != null ? pg : 1;
	var n = document.getElementById('filtroNome').value;
	$('#conteudoTabela').html('<tr><td colspan="4" style="text-align:center;" height="50" valign="middle">Carregando...<br /><img src="_img/preloader-ftp.gif" alt="Carregando..." /></td></tr>');
	$.post("_pags/admin/alunos_cursos_alunos.php", {
		n: n,
		p: p,
		pg: pg
	}, function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});
}

function filtraControleAlunos(p, pg) {
	var pg = pg != null ? pg : 1;
	var n = document.getElementById('filtroNome').value;
	$('#conteudoTabela').html('<tr><td colspan="4" style="text-align:center;" height="50" valign="middle">Carregando...<br /><img src="_img/preloader-ftp.gif" alt="Carregando..." /></td></tr>');
	$.post("_pags/professor/controle_alunos.php", {
		n: n,
		p: p,
		pg: pg
	}, function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});
}

function filtraObservacoesAlunos(p, pg) {
	var pg = pg != null ? pg : 1;
	var n = document.getElementById('filtroNome').value;
	var l = document.getElementById('filtroLogin').value;
	$('#conteudoTabela').html('<tr><td colspan="4" style="text-align:center;" height="50" valign="middle">Carregando...<br /><img src="_img/preloader-ftp.gif" alt="Carregando..." /></td></tr>');
	$.post("_pags/admin/relatorios/ajax_observacoes.php", {
		n: n,
		p: p,
		pg: pg,
		l: l
	}, function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});
}

function filtraObservacoesAlunosNaoLida(p, pg) {
	var pg = pg != null ? pg : 1;
	var n = document.getElementById('filtroNome').value;
	var l = document.getElementById('filtroLogin').value;
	$('#conteudoTabela').html('<tr><td colspan="4" style="text-align:center" height="50" valign="middle">Carregando...<br /><img src="_img/preloader-ftp.gif" alt="Carregando..." /></td></tr>');
	$.post("_pags/admin/observacoes/ajax_naolida.php", {
		n: n,
		p: p,
		pg: pg,
		l: l
	}, function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});
}

function filtraPesquisaAlunos(p, pg) {
	var pg = pg != null ? pg : 1;
	var n = document.getElementById('filtroNome').value;
	var l = document.getElementById('filtroLogin').value;
	$('#conteudoTabela').html('<tr><td colspan="4" style="text-align:center;" height="50" valign="middle">Carregando...<br /><img src="_img/preloader-ftp.gif" alt="Carregando..." /></td></tr>');
	$.post("_pags/admin/relatorios/ajax_pesquisa.php", {
		n: n,
		l: l,
		p: p,
		pg: pg
	}, function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});
}

function carregaAlunoOnline() {
	$.post("_pags/professor/ajax_lista.php", function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		} else {
			$('#conteudoTabela').html('<tr><td colspan="12" style="text-align:center;" height="50" valign="middle">Nenhum aluno online</td></tr>')
		}
		setTimeout('atualiza()', 10000);
	});
}

function sobre(e, c) {
	if (e.className == 'sobre') {
		e.className = c;
	} else {
		e.className = 'sobre';
	}
}

function arquivoImportacao() {
	var file = $('#arquivo').val();
	var formato = file.split('.').pop();
	if (formato != 'xls') {
		jAlert('Formato invalido. Enviar arquivo no formato .xls (Excel).', 'Alerta!');
	} else {
		jConfirm('Tem certeza de que deseja enviar arquivo para Importação de Alunos?', 'Alerta!', function (r) {
			if (r) {
				$('#arqimport').submit();
			} else { }
		});
	}
}

function confirmaImportacao() {
	jConfirm('Tem certeza de que deseja realizar Importação de Alunos?', 'Alerta!', function (r) {
		if (r) {
			$('#formimportador').submit();
		} else { }
	});
}

function removeAluno(id) {
	jConfirm('Tem certeza de que deseja remover este aluno?', 'Alerta!', function (r) {
		if (r) {
			document.location = "?pag=administrador&secao=alunos&acao=remove&usuario=" + id
		} else { }
	});
}

function removeMatricula(id, aluno) {
	jConfirm('Tem certeza de que deseja remover está matrícula?', 'Alerta!', function (r) {
		if (r) {
			document.location = "?pag=administrador&secao=matriculas&acao=remove&contrato=" + id + "&aluno=" + aluno
		} else { }
	});
}

function removeLaboratorio(id) {
	jConfirm('Tem certeza de que deseja remover este laboratório?\n Os horários de alunos serão removidos automaticamente.', 'Alerta!', function (r) {
		if (r) {
			document.location = "?pag=administrador&secao=laboratorios&acao=excluir&id=" + id + "&tipo=laboratorio"
		} else { }
	});
}

function removeHorario(id, horario) {
	jConfirm('Tem certeza de que deseja remover este horário?\n Os horários de alunos serão removidos automaticamente.', 'Alerta!', function (r) {
		if (r) {
			document.location = "?pag=administrador&secao=laboratorios&acao=horarios&lab=" + id + "&id=" + horario + "&op=deleta"
		} else { }
	});
}

function removeProfessor(id) {
	jConfirm('Tem certeza de que deseja remover este professor?', 'Alerta!', function (r) {
		if (r) {
			document.location = "?pag=administrador&secao=professores&acao=remove&usuario=" + id
		} else { }
	});
}

function marcarObservacoesLidas() {
	jConfirm('Tem certeza de que deseja marcar todas as observações como lidas?', 'Alerta!', function (r) {
		if (r) {
			jPromptPassword('Informe a sua senha para alteração:', '', 'Confirmação!', function (a) {
				if (a) {
					$.post('_pags/admin/observacoes/marcarlidas.php', {
						senha: a
					}, function (data) {
						//mostrando o retorno do post
						if (data == 'erro') {
							jAlert('Houve algum problema ao marcar as observações.', 'Alerta!', 'document.location="?pag=administrador&secao=observacoes&tipo=naolida"');
						}
						if (data == 'invalido') {
							jAlert('As observações não foram alteradas. Senha inválida.', 'Alerta!', 'document.location="?pag=administrador&secao=observacoes&tipo=naolida"');
						} else {
							document.location = "?pag=administrador&secao=observacoes&tipo=naolida";

						}

					})
				}
			});
		} else { }
	});
}

function marcarObservacoesLidasAluno(id) {
	jConfirm('Tem certeza de que deseja marcar como lidas?', 'Alerta!', function (r) {
		if (r) {
			$.post('_pags/admin/observacoes/marcarlidas.php', {
				aluno: id
			}, function (data) {
				//mostrando o retorno do post
				if (data == 'erro') {
					jAlert('Houve algum problema ao marcar as observações.', 'Alerta!', 'document.location="?pag=administrador&secao=observacoes&tipo=naolida"');
				} else {
					document.location = "?pag=administrador&secao=observacoes&tipo=naolida";

				}

			})
		} else { }
	});
}

function controleFrequenciaLista(id) {
	//texto('include.php?acao=controle_frequencia&aluno='+id,950,550);
	url = 'include.php?acao=controle_frequencia&aluno=' + id;
	titulo = 'Controle de Freqüência do Aluno';
	iframeModal_BS(url, titulo, true);
}

function imprimeAlunos() {
	var n = document.getElementById('filtroNome').value;
	var d = document.getElementById('filtroDn').value;
	var e = document.getElementById('filtroEmail').value;
	var l = document.getElementById('filtroLogin').value;
	var c = document.getElementById('ddlista').value;
	var s = document.getElementById('filtroStatus').value;

	//texto("include.php?acao=alunos&n="+n+"&d="+d+"&e="+e+"&l="+l,950,550);
	//url = "include.php?acao=alunos&n="+n+"&d="+d+"&e="+e+"&l="+l;
	url = "?pag=administrador&secao=relatorios&tipo=lista_alunos&n=" + n + "&d=" + d + "&e=" + e + "&l=" + l + "&c=" + c + "&s=" + s;
	document.location = url;
	//titulo = 'Alunos';
	//iframeModal_BS(url,titulo,true);

}

function imprimeTodosAlunos() {
	//texto("include.php?acao=alunos",950,550);
	url = "include.php?acao=alunos";
	titulo = 'Lista de Alunos';
	iframeModal_BS(url, titulo, true);
}

function abrecomproante(aluno) {
	//texto("include.php?acao=comprovante&aluno="+aluno,950,550);
	url = "include.php?acao=comprovante&aluno=" + aluno;
	titulo = 'Comprovante de matrícula';
	iframeModal_BS(url, titulo, true);
}

function abreorganizar(aluno) {
	//texto("include.php?acao=organizarcursos&aluno="+aluno,950,550);
	url = "include.php?acao=organizarcursos&aluno=" + aluno;
	titulo = 'Organizar cursos';
	iframeModal_BS(url, titulo);
}


function imprimeAniversariantes() {
	var n = document.getElementById('filtroNome').value;
	var d = document.getElementById('filtroDn').value;
	var e = document.getElementById('filtroEmail').value;
	var inicio = document.getElementById('filtroInicio').value;
	var fim = document.getElementById('filtroFim').value;

	//texto("include.php?acao=aniversariantes&n="+n+"&d="+d+"&e="+e+"&inicio="+inicio+"&fim="+fim,950,550);
	//url = "include.php?acao=aniversariantes&n="+n+"&d="+d+"&e="+e+"&inicio="+inicio+"&fim="+fim;
	//titulo = 'Aniversariantes';
	//iframeModal_BS(url,titulo,true);

	url = "?pag=administrador&secao=relatorios&tipo=aniversariantes&n=" + n + "&d=" + d + "&e=" + e + "&inicio=" + inicio + "&fim=" + fim;
	document.location = url;

}

function imprimeAtivosInativos() {
	var n = document.getElementById('filtroNome').value;
	var e = document.getElementById('filtroEmail').value;
	var ativo = document.getElementById('filtroAtivo').value;

	//texto("include.php?acao=ativosinativos&n="+n+"&e="+e+"&ativo="+ativo,950,550);
	url = "include.php?acao=ativosinativos&n=" + n + "&e=" + e + "&ativo=" + ativo;
	titulo = 'Ativos / Inativos';
	iframeModal_BS(url, titulo, true);
}

function imprimeAlunosStatus() {
	var n = document.getElementById('filtroNome').value;
	var e = document.getElementById('filtroEmail').value;
	var status = document.getElementById('filtroStatus').value;

	//texto("include.php?acao=alunos_status&n="+n+"&e="+e+"&status="+status,950,550);
	url = "include.php?acao=alunos_status&n=" + n + "&e=" + e + "&status=" + status;
	titulo = 'Alunos Cursando';
	iframeModal_BS(url, titulo, true);
}

function imprimeAlunosCursos(nome) {
	var nome = document.getElementById('filtroNome').value;

	if (nome != '') {
		nome = '&nome=' + nome;
	}
	//texto('include.php?acao=alunos_cursos'+nome,940,550);
	url = '?pag=administrador&secao=relatorios&tipo=alunos_cursos' + nome;
	//titulo = 'Alunos Cursos';
	//iframeModal_BS(url,titulo,true);

	document.location = url;
}

function imprimeAvalicaoAluno(aluno) {
	url = 'include.php?acao=medias_cursos&amp;aluno=' + aluno;
	titulo = 'Avaliação do aluno';
	iframeModal_BS(url, titulo, true);
}

function imprimeControleFrequencia(de, ate, aluno) {
	par_aluno = '';
	if (aluno) {
		acao = 'frequencia';
		par_aluno = '&aluno=' + aluno;
	} else {
		acao = 'frequencia_geral';
	}
	url = 'include.php?acao=' + acao + '&de=' + de + '&ate=' + ate + par_aluno;
	titulo = 'Controle de Frequência';
	iframeModal_BS(url, titulo, true);
}

function imprimePrevisaoEncerramento(de, ate) {
	url = 'include.php?acao=previsao_encerramento&de=' + de + '&ate=' + ate;
	titulo = 'Previsão de Encerramento';
	iframeModal_BS(url, titulo, true);
}

function imprimeGabaritosTestes(modulo, curso, aula) {
	if (modulo != '') {
		modulo = '&modulo=' + modulo;
	}
	if (curso != '') {
		curso = '&curso=' + curso;
	}
	if (aula != '') {
		aula = '&aula=' + aula;
	}
	iframeModal_BS('include.php?acao=gabaritos_testes' + modulo + curso + aula, 'Gabarito', true);
	//texto('include.php?acao=gabaritos_testes'+modulo+curso+aula,1000,550);
}

function imprimeAlunosObs(id, dini, dfim) {
	//texto('include.php?acao=observacoes&aluno='+id+'&dini='+dini+'&dfim='+dfim,950,550);
	url = 'include.php?acao=observacoes&aluno=' + id + '&dini=' + dini + '&dfim=' + dfim;
	titulo = 'Observações';
	iframeModal_BS(url, titulo, true);
}

function imprimeAlunosObsNaoLida(id) {
	texto('include.php?acao=observacoesNaolida&aluno=' + id, 950, 550);
}

function imprimeAlunosTerminando(curso, modulo) {
	if (curso != '') {
		curso = '&c=' + curso;
	} else {
		curso = '&c=0';
	}
	if (modulo != '') {
		modulo = '&m=' + modulo;
	} else {
		modulo = '&m=0';
	}
	//texto('include.php?acao=terminando'+curso+modulo,950,550);
	url = 'include.php?acao=terminando' + curso + modulo;
	titulo = 'Alunos Terminando';
	iframeModal_BS(url, titulo, true);
}

function imprimeAnotacoesAluno(id, curso) {
	//texto('include.php?acao=anotacoes_aluno&aluno='+id+'&curso='+curso,950,550);
	url = 'include.php?acao=anotacoes_aluno&aluno=' + id + '&curso=' + curso;
	titulo = 'Anotações';
	iframeModal_BS(url, titulo, true);
}

function testeAnotacoesAluno(id, curso) {
	//texto('include.php?acao=anotacoes_aluno&aluno='+id+'&curso='+curso,950,550);
	url = 'include.php?acao=anotacoes_aluno&aluno=' + id + '&curso=' + curso;
	titulo = 'Anotações';
	iframeModal_BS(url, titulo, false);
}

function MatriculaAlunoCursos(id) {
	texto('include.php?acao=matricula_aluno_cursos&contrato=' + id, 800, 550);
}

function LaboratorioHorarioAlunos(id) {
	texto('include.php?acao=laboratorio_horario_alunos&id_laboratorio_horario=' + id, 800, 550);
}

function confirmaRestore(text, tit) {
	jConfirm(text, tit, function (r) {
		if (r) {
			$("#confirmaRestore").submit();
		}
	});
}

function visualizarApostila(curso, aula, titulo) {
	if (titulo == false) {
		titulo = 'Apostila';
	}
	//texto("include.php?acao=apostila&curso="+curso+"&aula="+aula,950,550);
	url = "include.php?acao=apostila&curso=" + curso + "&aula=" + aula;
	iframeModal_BS(url, titulo);
}

function avisoApostilaFaltando() {

	jAlert('Apostila de conteúdo não encontrada!\nSolicite ao seu instrutor para providenciar o execício com o suporte.\nObrigado.', 'Atenção!');
}

function aulaSemApostila() {

	jAlert('Não há apostila passo a passo para esta aula!', 'Atenção!');
}

function aulaSemFixacao() {

	jAlert('Não há exercício de fixação para esta aula!', 'Atenção!');
}

function aulaSemInterativo() {

	jAlert('Não há exercício interativo para esta aula!', 'Atenção!');
}

function filtraPublicidadesLista(p) {
	var n = document.getElementById('filtroNome').value;
	var i = document.getElementById('filtroDi').value;
	var f = document.getElementById('filtroDf').value;
	$('#conteudoTabela').html('<tr><td colspan="10" style="text-align:center;" height="50" valign="middle">Carregando...<br /><img src="_img/preloader-ftp.gif" alt="Carregando..." /></td></tr>');
	$.post("_pags/admin/publicidades/carregaPublicidades.php", {
		n: n,
		i: i,
		f: f,
		p: p
	}, function (data) {
		if (data.length > 0) {
			$('#conteudoTabela').html(data);
		}
	});
}

function removePublicidade(id, nome) {
	jConfirm('Tem certeza de que deseja remover a publicidade <b>' + nome + '</b>?', 'Alerta!', function (r) {
		if (r) {
			document.location = "?pag=administrador&secao=publicidades&acao=excluir&id=" + id
		} else { }
	});
}

function iframeModal_BS(url, titulo, print, tamanho) {

	if (tamanho) {
		tamanhomodal = tamanho;
	} else {
		tamanhomodal = 'max-width:90%;';
	}
	id = new Date().valueOf();
	altura = '530px';
	if (print) {
		altura = '450px';
	}

	var html = '<div id="myModal' + id + '" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true" >';
	html += '  <div class="modal-dialog modal-lg" style="' + tamanhomodal + ' margin-botton:10px" >';
	html += '    <div class="modal-content" >';
	html += '     <div class="modal-header">';
	html += '        <h5 class="modal-title">' + titulo + '</h5>';
	html += '        <button type="button" class="close" data-dismiss="modal" aria-label="Close">';
	html += '          <span aria-hidden="true">&times;</span>';
	html += '        </button>';
	html += '      </div>';
	html += '      <div class="modal-body">';
	html += '          <iframe name="iFrameName' + id + '" src="' + url + '" style="width: 100%; height: ' + altura + ';"></iframe>';
	html += '      </div>';
	if (print) {
		html += '      <div class="modal-footer">';
		html += '          <button type="button" onclick="window.frames[\'iFrameName' + id + '\'].print();" class="btn btn-primary"><i class="fa fa-print" aria-hidden="true"></i> Imprimir</button>';
		html += '      </div>';
	}
	html += '    </div>';
	html += '  </div>';
	html += '</div>';

	$(html).prependTo('body');
	$('#myModal' + id + '').modal('show');
}


//set cookie language
function set_language(idioma) {
	document.cookie = "idioma_sel=" + idioma;
	location.reload();
}

//verifica versão do IE
function isIE() {
	var myNav = navigator.userAgent.toLowerCase();
	return (myNav.indexOf('msie') != -1) ? parseInt(myNav.split('msie')[1]) : false;
}

//verifica se usuario esta no Chrome
function check_chrome_ua() {
	var ua = navigator.userAgent.toLowerCase();
	var is_chrome = /chrome/.test(ua);

	return is_chrome;
}

$(document).ready(function () {
	$("body").on('click', '.acao-carregar', function (event) {
		$("#carregando").show();
		return true;
	});
	$('#novasenha').on('show.bs.modal', function (event) {
		var button = $(event.relatedTarget)
		var recipient = button.data('aluno')
		var modal = $(this)
		modal.find('#recipient-id').val(recipient)
	});

	if ($('.data').length > 0) {
		$('.data').mask('99/99/9999');
	}
});


function getInternetExplorerVersion() {
	var rv = -1; // Return value assumes failure.
	if (navigator.appName == 'Microsoft Internet Explorer') {
		var ua = navigator.userAgent;
		var re = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
		if (re.exec(ua) != null)
			rv = parseFloat(RegExp.$1);
	}
	return rv;
}


$(document).on('show.bs.modal', '#saldo', function () {
	$('#saldo .modal-body').css('background-image', '_img/5.gif');

	$('#nav-prepago').find('.nav-item').removeClass('active');
	$('#nav-prepago').find('.nav-item-7').addClass('active');
	$('#prepagohistorico').html('');

	carregahistorico(7);

	$('#saldo .modal-body').css('background-image', 'none');

})

$(document).on('click', '.nav-dias', function () {
	$('#saldo .modal-body').css('background-image', '_img/5.gif');
	$('#nav-prepago').find('.nav-item').removeClass('active');
	$(this).addClass('active');
	carregahistorico($(this).data('dia'));
	$('#saldo .modal-body').css('background-image', 'none');
})

function carregahistorico(dias) {
	$.ajax({
		url: '_inc/prepago.php',
		type: 'POST',
		data: {
			dias: dias
		},
		success: function (response) {

			var historico;
			$('.datasaldo').html(response['data']);
			$('.valorsaldo').html('R$' + response['saldo']);

			for (var i = 0; i < response['historico'].length; i++) {

				if (response['historico'][i][4] != '' && response['historico'][i][5]) {
					historico += '<tr data-container="body" data-toggle="popover" data-placement="bottom" data-content="Aluno: ' + response['historico'][i][5] + '<br>Cursos: ' + response['historico'][i][4] + ' " >';
				} else {
					historico += '<tr>';
				}

				if (response['historico'][i][0] == '-') {
					historico += '<th class="text-danger">' + response['historico'][i][0] + '</th>';
				} else {
					historico += '<th class="text-success">' + response['historico'][i][0] + '</th>';
				}
				historico += '<td>' + response['historico'][i][1] + '</td>';
				historico += '<td>' + response['historico'][i][2] + '</td>';
				historico += '<td>' + response['historico'][i][3] + '</td>';
				historico += '</tr>';

			}

			if (response['historico'].length == 0) {
				historico += '<tr>';
				historico += '<td class="text-center">Nenhuma operação encontrada.</td>';
				historico += '</tr>';
			}
			$('#prepagohistorico').html(historico);

			$('[data-toggle="popover"]').popover({
				trigger: 'hover',
				placement: 'bottom',
				container: 'body',
				html: true
			})

		},
		dataType: "json"
	})
}

function btnaddcreditos() {
	url = "https://parceiros.ouromoderno.com.br/?lite=1";
	jConfirm('Você será redirecionado para o Portal do Licenciado', 'Aviso!', function (r) {
		if (r) {
			document.location = url;
		} else { }
	});
}

function abreexportaread(aluno) {
	//texto("include.php?acao=organizarcursos&aluno="+aluno,950,550);
	url = "include.php?acao=exportaread&aluno=" + aluno;
	titulo = 'Migração de aluno para ambiente EAD';
	iframeModal_BS(url, titulo);
}
// feed de anuncios
async function feed() {
	fetch('fetch.php?ACAO=feed')
		.then(function (response) {
			return response.text()
		})
		.then(data => {
			document.querySelector('#feed-conteudo').innerHTML = data
			console.log(data)
		})
		.catch(function (err) {
			console.error('Failed retrieving information', err);
		});
}
// relogio
function proximo_segundo() {
	var hoje = new Date
	var hora = ('0' + hoje.getHours()).slice('-2')
	var minutos = ('0' + hoje.getMinutes()).slice('-2')
	var segundos = ('0' + hoje.getSeconds()).slice('-2')
	relogio = document.getElementById('relogio')
	relogio.textContent = hora + ":" + minutos + ":" + segundos
	setTimeout('proximo_segundo()', 1000)
}


// dias para expirar
async function homediasparaexpirar(diasParaExpirar, lan1, lan2, lan3) {
	fetch('fetch.php?ACAO=homediasparaexpirar')
		.then(function (response) {
			return response.json()
		})
		.then(data => {
			var txtdias = " dia ";
			if (data.dias > 1) {
				var txtdias = " dias ";
			}

			document.querySelector('#diasParaExpirar').innerHTML = data.dias + txtdias;

			if (!diasParaExpirar && data.dias < 16) {
				let txt = lan1 + ' ' + data.dias + txtdias + lan2;

				swal({
					title: lan3,
					html: txt,
					type: 'warning',
					showCancelButton: true
				}).then(function (result) {
					" . $ok . ";
				}, function (dismiss) {
					if (dismiss === 'cancel') {
						document.location = '?pag=administrador&secao=licencas';
					}
				});
			}

			console.log(data.dias)
		})
		.catch(function (err) {
			console.error('Failed retrieving information', err);
		});
}

function fechar() {
	var is_chrome = window.chrome;

	if (typeof is_chrome === "undefined") {
		var win = window.open(location, "_self");
		win.close();
	} else if (navigator.userAgent.toLowerCase().indexOf('firefox') > -1) {
		window.open('', '_self', '');
		window.close();
	} else {
		window.open("", "_self").close();
	}
}